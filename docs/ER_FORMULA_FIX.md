# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º—É–ª—ã –ï–† –∏ —Ñ–∏–ª—å—Ç—Ä–∞ "–í—Å–µ –ø–µ—Ä–∏–æ–¥—ã"

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º—É–ª—ã –ï–†**

#### –ü—Ä–æ–±–ª–µ–º–∞:
- –ï–† –±—Ä–∞–ª—Å—è –∏–∑ Excel —Ñ–∞–π–ª–∞, –Ω–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ù—É–∂–Ω–æ –±—ã–ª–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å –ï–† –∫–∞–∫ —Ñ–æ—Ä–º—É–ª—É: **–°–ò/–ø—Ä–æ—Å–º–æ—Ç—Ä—ã * 100**

#### –†–µ—à–µ–Ω–∏–µ:

##### –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã –≤ ProjectRecord:
```typescript
/**
 * –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –ï–† –∫–∞–∫ –°–ò/–ø—Ä–æ—Å–º–æ—Ç—Ä—ã * 100
 */
calculateER(): number {
  if (this.views === 0) return 0;
  return (this.si / this.views) * 100;
}

/**
 * –ü–æ–ª—É—á–∞–µ—Ç –ï–† (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–∞—Å—á–µ—Ç, –µ—Å–ª–∏ er = 0)
 */
getER(): number {
  if (this.er === 0) {
    return this.calculateER();
  }
  return this.er;
}
```

##### –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ —Ä–∞—Å—á–µ—Ç—ã –ï–†:

**DashboardPage:**
```typescript
// –ë—ã–ª–æ:
const avgER = (sum / length * 100).toFixed(1);

// –°—Ç–∞–ª–æ:
const avgER = filtered.length
  ? (filtered.reduce((sum, r) => sum + (r.si / r.views) * 100, 0) / filtered.length).toFixed(1)
  : '0.0';
```

**TopProjects:**
```typescript
// –ë—ã–ª–æ:
avgER: (stats.er.reduce((sum, er) => sum + er, 0) / stats.er.length * 100).toFixed(1)

// –°—Ç–∞–ª–æ:
avgER: stats.views > 0 ? ((stats.si / stats.views) * 100).toFixed(1) : '0.0'
```

**ChartsPage:**
```typescript
// –ë—ã–ª–æ:
const avgER = (sum / length * 100).toFixed(1);

// –°—Ç–∞–ª–æ:
const totalViews = filteredData.reduce((sum, record) => sum + record.views, 0);
const totalSI = filteredData.reduce((sum, record) => sum + record.si, 0);
const avgER = totalViews > 0 ? ((totalSI / totalViews) * 100).toFixed(1) : '0.0';
```

**–•—É–∫–∏ –¥–∏–∞–≥—Ä–∞–º–º:**
- `useProjectsChartData`: –û–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –°–ò/–ø—Ä–æ—Å–º–æ—Ç—Ä—ã
- `useWeeklyChartData`: –û–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –°–ò/–ø—Ä–æ—Å–º–æ—Ç—Ä—ã
- `useERChartData`: –û–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –°–ò/–ø—Ä–æ—Å–º–æ—Ç—Ä—ã

### 2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞ "–í—Å–µ –ø–µ—Ä–∏–æ–¥—ã"**

#### –ü—Ä–æ–±–ª–µ–º–∞:
- –§–∏–ª—å—Ç—Ä "–í—Å–µ –ø–µ—Ä–∏–æ–¥—ã" –Ω–µ —Ä–∞–±–æ—Ç–∞–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ü—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏—Å—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ

#### –†–µ—à–µ–Ω–∏–µ:

**–û–±–Ω–æ–≤–ª–µ–Ω useFilteredData:**
```typescript
// –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
console.log('useFilteredData:', { 
  dataLength: data.length, 
  selectedProject, 
  selectedPeriod,
  hasSelectedProject: !!selectedProject,
  hasSelectedPeriod: !!selectedPeriod
});

// –£–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
if (!selectedProject && !selectedPeriod) {
  console.log('No filters selected, returning all data');
  return data;
}
```

### 3. **–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è**

#### Excel –∑–∞–≥—Ä—É–∑–∫–∞:
```typescript
console.log(`ER Debug - Row ${rowIndex + 1}:`, {
  link, views, si, er,
  erType: typeof er,
  erNumber: Number(er),
  isFinite: Number.isFinite(Number(er))
});
```

#### Dashboard —Ä–∞—Å—á–µ—Ç:
```typescript
console.log('ER Debug:', {
  filteredLength: filtered.length,
  sampleER: filtered.slice(0, 5).map(r => ({ 
    er: r.er, 
    calculatedER: (r.si / r.views) * 100,
    project: r.project,
    views: r.views,
    si: r.si
  })),
  allER: filtered.map(r => r.er)
});
```

### 4. **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã –ï–†**

–¢–µ–ø–µ—Ä—å –¥–∏–∞–ø–∞–∑–æ–Ω—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—Ä–æ—Ü–µ–Ω—Ç–∞–º–∏:
- **0-0.1%**: 0 –¥–æ 0.1
- **0.1-0.5%**: 0.1 –¥–æ 0.5
- **0.5-1%**: 0.5 –¥–æ 1
- **1-2%**: 1 –¥–æ 2
- **2%+**: 2 –∏ –≤—ã—à–µ

### 5. **–ó–∞—â–∏—Ç–∞ –æ—Ç –¥–µ–ª–µ–Ω–∏—è –Ω–∞ –Ω–æ–ª—å**

–í–æ –≤—Å–µ—Ö —Ä–∞—Å—á–µ—Ç–∞—Ö –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞:
```typescript
const erPercent = record.views > 0 ? (record.si / record.views) * 100 : 0;
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–æ—Ä–º—É–ª–∞ –ï–†:
```
–ï–† = (–°–ò / –ü—Ä–æ—Å–º–æ—Ç—Ä—ã) * 100
```

### –ü—Ä–∏–º–µ—Ä—ã:
- –°–ò: 100, –ü—Ä–æ—Å–º–æ—Ç—Ä—ã: 1000 ‚Üí –ï–† = (100/1000) * 100 = 10%
- –°–ò: 5, –ü—Ä–æ—Å–º–æ—Ç—Ä—ã: 1000 ‚Üí –ï–† = (5/1000) * 100 = 0.5%
- –°–ò: 0, –ü—Ä–æ—Å–º–æ—Ç—Ä—ã: 1000 ‚Üí –ï–† = (0/1000) * 100 = 0%

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
3. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏:
   - `ER Debug` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞—Å—á–µ—Ç –ï–†
   - `useFilteredData` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Ñ–∏–ª—å—Ç—Ä–æ–≤
   - `ER Calculation` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏—Ç–æ–≥–æ–≤—ã–π —Ä–∞—Å—á–µ—Ç

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å:
- ‚úÖ **–ï–† —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ** –ø–æ —Ñ–æ—Ä–º—É–ª–µ –°–ò/–ø—Ä–æ—Å–º–æ—Ç—Ä—ã * 100
- ‚úÖ **–§–∏–ª—å—Ç—Ä "–í—Å–µ –ø–µ—Ä–∏–æ–¥—ã" —Ä–∞–±–æ—Ç–∞–µ—Ç** –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ **–ó–∞—â–∏—Ç–∞ –æ—Ç –¥–µ–ª–µ–Ω–∏—è –Ω–∞ –Ω–æ–ª—å** –≤–æ –≤—Å–µ—Ö —Ä–∞—Å—á–µ—Ç–∞—Ö
- ‚úÖ **–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã** –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–π —Ñ–æ—Ä–º—É–ª—ã

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ 